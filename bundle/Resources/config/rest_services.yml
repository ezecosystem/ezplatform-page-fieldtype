parameters:
    ezpublish_rest.controller.base.class: eZ\Publish\Core\REST\Server\Controller
    ezpublish_rest.controller.binary_content.class: eZ\Publish\Core\REST\Server\Controller\BinaryContent
    ezpublish_rest.controller.content.class: eZ\Publish\Core\REST\Server\Controller\Content
    ezpublish_rest.controller.content_type.class: eZ\Publish\Core\REST\Server\Controller\ContentType
    ezpublish_rest.controller.location.class: eZ\Publish\Core\REST\Server\Controller\Location
    ezpublish_rest.controller.object_state.class: eZ\Publish\Core\REST\Server\Controller\ObjectState
    ezpublish_rest.controller.role.class: eZ\Publish\Core\REST\Server\Controller\Role
    ezpublish_rest.controller.root.class: eZ\Publish\Core\REST\Server\Controller\Root
    ezpublish_rest.controller.section.class: eZ\Publish\Core\REST\Server\Controller\Section
    ezpublish_rest.controller.trash.class: eZ\Publish\Core\REST\Server\Controller\Trash
    ezpublish_rest.controller.user.class: eZ\Publish\Core\REST\Server\Controller\User
    ezpublish_rest.controller.url_wildcard.class: eZ\Publish\Core\REST\Server\Controller\URLWildcard
    ezpublish_rest.controller.url_alias.class: eZ\Publish\Core\REST\Server\Controller\URLAlias

    ezpublish_rest.factory.class: eZ\Bundle\EzPublishRestBundle\ApiLoader\Factory
    ezpublish_rest.input_parser.class: eZ\Publish\Core\REST\Server\Input\Parser
    ezpublish_rest.input_dispatcher.class: eZ\Publish\Core\REST\Common\Input\Dispatcher
    ezpublish_rest.input_parsing_dispatcher.class: eZ\Publish\Core\REST\Common\Input\ParsingDispatcher
    ezpublish_rest.request_parser.class: eZ\Publish\Core\REST\Common\RequestParser\Prefixed
    ezpublish_rest.parser_tools.class: eZ\Publish\Core\REST\Common\Input\ParserTools
    ezpublish_rest.field_type_parser.class: eZ\Publish\Core\REST\Common\Input\FieldTypeParser
    ezpublish_rest.listener.class: eZ\Bundle\EzPublishRestBundle\EventListener\RestListener
    ezpublish_rest.field_type_serializer.class: eZ\Publish\Core\REST\Common\Output\FieldTypeSerializer
    ezpublish_rest.request.class: eZ\Publish\Core\REST\Server\Request

    ezpublish_rest.field_type_processor_registry.class: eZ\Publish\Core\REST\Common\FieldTypeProcessorRegistry
    ezpublish_rest.field_type_processor.ezimage.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\ImageProcessor
    ezpublish_rest.field_type_processor.ezdatetime.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\DateAndTimeProcessor
    ezpublish_rest.field_type_processor.ezdate.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\DateProcessor
    ezpublish_rest.field_type_processor.ezmedia.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\MediaProcessor
    ezpublish_rest.field_type_processor.ezobjectrelationlist.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\RelationListProcessor
    ezpublish_rest.field_type_processor.ezobjectrelation.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\RelationProcessor
    ezpublish_rest.field_type_processor.eztime.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\TimeProcessor
    ezpublish_rest.field_type_processor.ezxmltext.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\XmlTextProcessor
    ezpublish_rest.field_type_processor.ezbinaryfile.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\BinaryProcessor
    ezpublish_rest.field_type_processor.ezpage.class: eZ\Publish\Core\REST\Common\FieldTypeProcessor\PageProcessor

    ezpublish_rest.output.visitor.dispatcher.class: eZ\Publish\Core\REST\Server\View\AcceptHeaderVisitorDispatcher
    ezpublish_rest.output.visitor.class: eZ\Publish\Core\REST\Common\Output\Visitor
    ezpublish_rest.output.generator.json.class: eZ\Publish\Core\REST\Common\Output\Generator\Json
    ezpublish_rest.output.generator.json.field_type_hash_generator.class: eZ\Publish\Core\REST\Common\Output\Generator\Json\FieldTypeHashGenerator
    ezpublish_rest.output.generator.xml.class: eZ\Publish\Core\REST\Common\Output\Generator\Xml
    ezpublish_rest.output.generator.xml.field_type_hash_generator.class: eZ\Publish\Core\REST\Common\Output\Generator\Xml\FieldTypeHashGenerator
    ezpublish_rest.output.visitor.json.regexps:
        - '(^application/vnd\.ez\.api\.[A-Za-z]+\+json$)'
        - '(^application/json$)'
    ezpublish_rest.output.visitor.xml.regexps:
        - '(^application/vnd\.ez\.api\.[A-Za-z]+\+xml$)'
        - '(^application/xml$)'
        - '(^.*/.*$)'

    ezpublish_rest.output.value_object_visitor.dispatcher.class: eZ\Publish\Core\REST\Common\Output\ValueObjectVisitorDispatcher
    ezpublish_rest.output.value_object_visitor.Exception.InvalidArgumentException.class: eZ\Publish\Core\REST\Server\Output\ValueObjectVisitor\InvalidArgumentException

services:
    ezpublish_rest.field_type_serializer:
        class: %ezpublish_rest.field_type_serializer.class%
        arguments:
            - @ezpublish.api.service.field_type
            - @ezpublish_rest.field_type_processor_registry

    ezpublish_rest.request_parser:
        class: %ezpublish_rest.request_parser.class%
        arguments:
            # Note: everything related to prefix will be removed when UrlGeneration is handled by Symfony instead
            - %ezpublish_rest.path_prefix%

    ezpublish_rest.parser_tools:
        class: %ezpublish_rest.parser_tools.class%


    ezpublish_rest.field_type_parser:
        class: %ezpublish_rest.field_type_parser.class%
        arguments:
            - @ezpublish.api.service.content
            - @ezpublish.api.service.content_type
            - @ezpublish.api.service.field_type
            - @ezpublish_rest.field_type_processor_registry

    ezpublish_rest.factory:
        class: %ezpublish_rest.factory.class%
        arguments: [@service_container, @ezpublish.api.repository]

    ezpublish_rest.controller.base:
        class: %ezpublish_rest.controller.base.class%
        abstract: true
        calls:
            - [ setInputDispatcher, [@ezpublish_rest.input_dispatcher] ]
            - [ setRouter, [@router] ]
            - [ setRequestParser, [@ezpublish_rest.request_parser] ]
            - [ setRequest, [@ezpublish_rest.request] ]
            - [ setContainer, [@service_container] ]
            - [ setRepository, [@ezpublish.api.repository] ]

    ezpublish_rest.controller.root:
        class: %ezpublish_rest.controller.root.class%
        parent: ezpublish_rest.controller.base

    ezpublish_rest.controller.section:
        class: %ezpublish_rest.controller.section.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.section

    ezpublish_rest.controller.binary_content:
        class: %ezpublish_rest.controller.binary_content.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.fieldType.ezimage.variation_service

    ezpublish_rest.controller.content:
        class: %ezpublish_rest.controller.content.class%
        parent: ezpublish_rest.controller.base

    ezpublish_rest.controller.content_type:
        class: %ezpublish_rest.controller.content_type.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.content_type

    ezpublish_rest.controller.role:
        class: %ezpublish_rest.controller.role.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.role
            - @ezpublish.api.service.user
            - @ezpublish.api.service.location

    ezpublish_rest.controller.location:
        class: %ezpublish_rest.controller.location.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.location
            - @ezpublish.api.service.content
            - @ezpublish.api.service.trash

    ezpublish_rest.controller.object_state:
        class: %ezpublish_rest.controller.object_state.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.object_state
            - @ezpublish.api.service.content

    ezpublish_rest.controller.trash:
        class: %ezpublish_rest.controller.trash.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.trash
            - @ezpublish.api.service.location

    ezpublish_rest.controller.user:
        class: %ezpublish_rest.controller.user.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.user
            - @ezpublish.api.service.role
            - @ezpublish.api.service.content
            - @ezpublish.api.service.content_type
            - @ezpublish.api.service.location
            - @ezpublish.api.service.section
            - @ezpublish.api.repository

    ezpublish_rest.controller.url_wildcard:
        class: %ezpublish_rest.controller.url_wildcard.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.url_wildcard

    ezpublish_rest.controller.url_alias:
        class: %ezpublish_rest.controller.url_alias.class%
        parent: ezpublish_rest.controller.base
        arguments:
            - @ezpublish.api.service.url_alias
            - @ezpublish.api.service.location

    ezpublish_rest.listener:
        class: %ezpublish_rest.listener.class%
        arguments:
            - @service_container
            - @ezpublish_rest.request
            - @?form.csrf_provider
        tags:
            - { name: kernel.event_subscriber }

    ezpublish_rest.request:
        class: %ezpublish_rest.request.class%

    ezpublish_rest.field_type_processor_registry:
        class: %ezpublish_rest.field_type_processor_registry.class%

    ezpublish_rest.field_type_processor.ezimage:
        class: %ezpublish_rest.field_type_processor.ezimage.class%
        factory_service: ezpublish_rest.factory
        factory_method: getImageFieldTypeProcessor
        arguments:
            # @todo change to @router
            - @ezpublish_rest.request_parser
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezimage }

    ezpublish_rest.field_type_processor.ezdatetime:
        class: %ezpublish_rest.field_type_processor.ezdatetime.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezdatetime }

    ezpublish_rest.field_type_processor.ezdate:
        class: %ezpublish_rest.field_type_processor.ezdate.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezdate }

    ezpublish_rest.field_type_processor.ezmedia:
        class: %ezpublish_rest.field_type_processor.ezmedia.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezmedia }

    ezpublish_rest.field_type_processor.ezobjectrelationlist:
        class: %ezpublish_rest.field_type_processor.ezobjectrelationlist.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezobjectrelationlist }

    ezpublish_rest.field_type_processor.ezobjectrelation:
        class: %ezpublish_rest.field_type_processor.ezobjectrelation.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezobjectrelation }

    ezpublish_rest.field_type_processor.eztime:
        class: %ezpublish_rest.field_type_processor.eztime.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.eztime }

    ezpublish_rest.field_type_processor.ezxmltext:
        class: %ezpublish_rest.field_type_processor.ezxmltext.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezxmltext }

    ezpublish_rest.field_type_processor.ezbinaryfile:
        class: %ezpublish_rest.field_type_processor.ezbinaryfile.class%
        factory_service: ezpublish_rest.factory
        factory_method: getBinaryFileFieldTypeProcessor
        arguments:
            - @ezpublish.fieldtype.ezbinaryfile.ioservice
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezbinaryfile }

    ezpublish_rest.field_type_processor.ezpage:
        class: %ezpublish_rest.field_type_processor.ezpage.class%
        tags:
            - { name: ezpublish_rest.field_type_processor, alias: application/vnd.ez.api.ezpage }

    ### OUTPUT

    # Main REST output dispatcher
    # Gets a <requestMatch> => output.visitor mapping with the ezpublish_rest.output.visitor tag.
    ezpublish_rest.output.visitor.dispatcher:
        class: %ezpublish_rest.output.visitor.dispatcher.class%

    # format output visitors
    ezpublish_rest.output.visitor.json:
        class: %ezpublish_rest.output.visitor.class%
        arguments:
            - @ezpublish_rest.output.generator.json
            - @ezpublish_rest.output.value_object_visitor.dispatcher
        tags:
            - { name: ezpublish_rest.output.visitor, regexps: ezpublish_rest.output.visitor.json.regexps }

    ezpublish_rest.output.visitor.xml:
        class: %ezpublish_rest.output.visitor.class%
        arguments:
            - @ezpublish_rest.output.generator.xml
            - @ezpublish_rest.output.value_object_visitor.dispatcher
        tags:
            - { name: ezpublish_rest.output.visitor, regexps: ezpublish_rest.output.visitor.xml.regexps }

    # format output generators
    ezpublish_rest.output.generator.xml:
        class: %ezpublish_rest.output.generator.xml.class%
        arguments:
            - @ezpublish_rest.output.generator.xml.field_type_hash_generator

    ezpublish_rest.output.generator.xml.field_type_hash_generator:
        class: %ezpublish_rest.output.generator.xml.field_type_hash_generator.class%

    ezpublish_rest.output.generator.json:
        class: %ezpublish_rest.output.generator.json.class%
        arguments:
            - @ezpublish_rest.output.generator.json.field_type_hash_generator

    ezpublish_rest.output.generator.json.field_type_hash_generator:
        class: %ezpublish_rest.output.generator.json.field_type_hash_generator.class%

    # value objects visitors
    ezpublish_rest.output.value_object_visitor.dispatcher:
        class: %ezpublish_rest.output.value_object_visitor.dispatcher.class%

    ezpublish_rest.output.value_object_visitor.Exception.InvalidArgumentException:
        class: %ezpublish_rest.output.value_object_visitor.Exception.InvalidArgumentException.class%
        tags:
            - { name: ezpublish_rest.output.value_object_visitor, type: \eZ\Publish\API\Repository\Exceptions\InvalidArgumentException }

    ezpublish_rest.input_dispatcher:
        class: %ezpublish_rest.input_dispatcher.class%
        factory_service: ezpublish_rest.factory
        arguments:
            - @ezpublish_rest.input_parsing_dispatcher
            - @ezpublish_rest.request_parser
            - @ezpublish_rest.parser_tools
            - @ezpublish_rest.field_type_parser

    ezpublish_rest.input_parsing_dispatcher:
        class: %ezpublish_rest.input_parsing_dispatcher.class%

    ezpublish_rest.input_parser:
        class: %ezpublish_rest.input_parser.class%
        abstract: true
        calls:
            - [ setRequestParser, [ @ezpublish_rest.request_parser ] ]

    ezpublish_rest.input_parser.RoleInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\RoleInput
        arguments:
            - @ezpublish.api.service.role
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.application/vnd.ez.api.RoleInput }]

    ezpublish_rest.input_parser.SectionInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\SectionInput
        arguments:
            - @ezpublish.api.service.section
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.SectionInput }]

    ezpublish_rest.input_parser.ContentCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentCreate
        arguments:
            - @ezpublish.api.service.content
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.field_type_parser
            - @ezpublish_rest.parser_tools
            - @ezpublish_rest.input_parser.LocationCreate
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentCreate }]
            
    ezpublish_rest.input_parser.VersionUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\VersionUpdate
        arguments:
            - @ezpublish.api.service.content
            - @ezpublish_rest.field_type_parser
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.VersionUpdate }]
        
    ezpublish_rest.input_parser.UserGroupCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\UserGroupCreate
        arguments:
            - @ezpublish.api.service.user
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.field_type_parser
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.UserGroupCreate }]

    ezpublish_rest.input_parser.UserCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\UserCreate
        arguments:
            - @ezpublish.api.service.user
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.field_type_parser
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.UserCreate }]

    ezpublish_rest.input_parser.ContentUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentUpdate
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentUpdate }]

    ezpublish_rest.input_parser.UserGroupUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\UserGroupUpdate
        arguments:
            - @ezpublish.api.service.user
            - @ezpublish.api.service.content
            - @ezpublish.api.service.location
            - @ezpublish_rest.field_type_parser
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.UserGroupUpdate }]

    ezpublish_rest.input_parser.UserUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\UserUpdate
        arguments:
            - @ezpublish.api.service.user
            - @ezpublish.api.service.content
            - @ezpublish_rest.field_type_parser
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.UserUpdate }]

    ezpublish_rest.input_parser.ContentTypeGroupInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentTypeGroupInput
        arguments:
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentTypeGroupInput }]

    ezpublish_rest.input_parser.ContentTypeCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentTypeCreate
        arguments:
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.field_type_parser
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentTypeCreate }]

    ezpublish_rest.input_parser.ContentTypeUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentTypeUpdate
        arguments:
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentTypeUpdate }]

    # @todo fixme 'application/vnd.ez.api.FieldDefinitionCreate'  => $fieldDefinitionCreateParser,

    ezpublish_rest.input_parser.FieldDefinitionUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\FieldDefinitionUpdate
        arguments:
            - @ezpublish.api.service.content_type
            - @ezpublish_rest.field_type_parser
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.FieldDefinitionUpdate }]

    ezpublish_rest.input_parser.PolicyCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\PolicyCreate
        arguments:
            - @ezpublish.api.service.role
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.PolicyCreate }]

    ezpublish_rest.input_parser.PolicyUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\PolicyUpdate
        arguments:
            - @ezpublish.api.service.role
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.PolicyUpdate }]

    ezpublish_rest.input_parser.RoleAssignInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\RoleAssignInput
        arguments:
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.RoleAssignInput }]

    ezpublish_rest.input_parser.LocationCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\LocationCreate
        arguments:
            - @ezpublish.api.service.location
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.LocationCreate }]

    ezpublish_rest.input_parser.LocationUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\LocationUpdate
        arguments:
            - @ezpublish.api.service.location
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.LocationUpdate }]

    ezpublish_rest.input_parser.ObjectStateGroupCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ObjectStateGroupCreate
        arguments:
            - @ezpublish.api.service.object_state
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ObjectStateGroupCreate }]

    ezpublish_rest.input_parser.ObjectStateGroupUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ObjectStateGroupUpdate
        arguments:
            - @ezpublish.api.service.object_state
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ObjectStateGroupUpdate }]

    ezpublish_rest.input_parser.ObjectStateCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ObjectStateCreate
        arguments:
            - @ezpublish.api.service.object_state
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ObjectStateCreate }]

    ezpublish_rest.input_parser.ObjectStateUpdate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ObjectStateUpdate
        arguments:
            - @ezpublish.api.service.object_state
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ObjectStateUpdate }]

    ezpublish_rest.input_parser.ContentObjectStates:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ContentObjectStates
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ContentObjectStates }]

    ezpublish_rest.input_parser.RelationCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\RelationCreate
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.v }]

    ezpublish_rest.input_parser.ViewInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\ViewInput
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.ViewInput }]

    ezpublish_rest.input_parser.UrlWildcardCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\URLWildcardCreate
        arguments:
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.URLWildcardCreate }]

    ezpublish_rest.input_parser.UrlAliasCreate:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\URLAliasCreate
        arguments:
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.URLAliasCreate }]

    ezpublish_rest.input_parser.SessionInput:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Server\Input\Parser\SessionInput
        arguments:
            - @ezpublish_rest.parser_tools
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.SessionInput }]

    # internal Media-Types
    ezpublish_rest.input_parser.internal.criterion.ContentId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ContentId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ContentId }]

    ezpublish_rest.input_parser.internal.criterion.ContentRemoteId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ContentRemoteId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ContentRemoteId }]

    ezpublish_rest.input_parser.internal.criterion.ContentTypeGroupId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ContentTypeGroupId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ContentTypeGroupId }]

    ezpublish_rest.input_parser.internal.criterion.ContentTypeId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ContentTypeId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ContentTypeId }]

    ezpublish_rest.input_parser.internal.criterion.ContentTypeIdentifier:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ContentTypeIdentifier
        arguments:
            - @ezpublish.api.service.content
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ContentTypeIdentifier }]

    ezpublish_rest.input_parser.internal.criterion.DateMetadata:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\DateMetadata
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.DateMetadata }]

    ezpublish_rest.input_parser.internal.criterion.Field:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\Field
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.Field }]

    ezpublish_rest.input_parser.internal.criterion.FullText:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\FullText
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.FullText }]

    ezpublish_rest.input_parser.internal.criterion.LocationId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LocationId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LocationId }]

    ezpublish_rest.input_parser.internal.criterion.LocationRemoteId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LocationRemoteId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LocationRemoteId }]

    ezpublish_rest.input_parser.internal.criterion.LogicalAnd:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LogicalAnd
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LogicalAnd }]

    ezpublish_rest.input_parser.internal.criterion.LogicalNot:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LogicalNot
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LogicalNot }]

    ezpublish_rest.input_parser.internal.criterion.LogicalOperator:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LogicalOperator
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LogicalOperator }]

    ezpublish_rest.input_parser.internal.criterion.LogicalOr:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LogicalOr
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LogicalOr }]

    ezpublish_rest.input_parser.internal.criterion.MoreLikeThis:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\MoreLikeThis
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.MoreLikeThis }]

    ezpublish_rest.input_parser.internal.criterion.Operator:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\Operator
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.Operator }]

    ezpublish_rest.input_parser.internal.criterion.ParentLocationId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ParentLocationId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ParentLocationId }]

    ezpublish_rest.input_parser.internal.criterion.ParentLocationRemoteId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ParentLocationRemoteId
        arguments:
            - @ezpublish.api.service.location
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ParentLocationRemoteId }]

    ezpublish_rest.input_parser.internal.criterion.SectionIdentifier:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\SectionIdentifier
        arguments:
            - @ezpublish.api.service.section
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.SectionIdentifier }]

    ezpublish_rest.input_parser.internal.criterion.SectionId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\SectionId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.SectionId }]

    ezpublish_rest.input_parser.internal.criterion.Status:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\Status
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.Status }]

    ezpublish_rest.input_parser.internal.criterion.Subtree:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\Subtree
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.Subtree }]

    ezpublish_rest.input_parser.internal.criterion.UrlAlias:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\UrlAlias
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.UrlAlias }]

    ezpublish_rest.input_parser.internal.criterion.UserMetadata:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\UserMetadata
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.UserMetadata }]

    ezpublish_rest.input_parser.internal.criterion.ObjectStateId:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\ObjectStateId
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.ObjectStateId }]

    ezpublish_rest.input_parser.internal.criterion.Visibility:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\Visibility
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.Visibility }]

    ezpublish_rest.input_parser.internal.criterion.LanguageCode:
        parent: ezpublish_rest.input_parser
        class: eZ\Publish\Core\REST\Input\Parser\Criterion\LanguageCode
        tags: [ { name: ezpublish_rest.input_parser, alias: application/vnd.ez.api.internal.criterion.LanguageCode }]
